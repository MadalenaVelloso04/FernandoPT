<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fernando - Fitness Landing Page</title>
  <link rel="stylesheet" href="index.css" />
</head>
<body>
  <div class="container">
    <header class="nav">
      <div class="logo">
        <img src="images/logo_long.png" alt="">
      </div>
      <nav class="menu">
        <a href="#">Classes</a>
        <a href="#">About me</a>
        <button class="outline-btn">online consulting</button>
      </nav>
    </header>

<svg width='0' height='0' aria-hidden='true'>
  <filter id='round'>
    <!-- rough post-blur alpha rounding-->
    <!-- alphas below .5 get mapped to 0-->
    <!-- the other alphas get mapped to 1-->
    <feComponentTransfer>
      <feFuncA type='discrete' tableValues='0 1'/>
    </feComponentTransfer>
  </filter>
  <filter id='shape'>
    <!-- map the fully transparent outer part (alpha = 0)-->
    <!-- and the opaque frame (alpha = 1) to alpha = 0-->
    <!-- while mapping the midway alpha (alpha = .5) of -->
    <!-- the semitransparent image within rounded frame-->
    <!-- to alpha = 1-->
    <!-- that is: rounded corners frame made transparent-->
    <!-- remaining image shape within made opaque-->
    <feComponentTransfer result='rough'>
      <feFuncA type='table' tableValues='0 1 0'/>
    </feComponentTransfer>
    <!-- just to smooth slightly jagged edges-->
    <feGaussianBlur stdDeviation='3'/>
    <feComponentTransfer>
      <!-- extend [0, 1] alpha interval both below & above-->
      <feFuncA type='table' tableValues='-2 2'/>
    </feComponentTransfer>
    <!-- put the fully opaque round image within smooth shape-->
    <feComposite in='rough' operator='in'/>
  </filter>
</svg>

<main>
	<article class='featured'>
		<div class='back'>
			<!-- creates the shaped image frame -->
			<div class='frame' aria-hidden='true'></div>
			<!-- alternatively, this could also be a pseudo on the .back element -->
			<img id="featuredImg" src="images/IMG_0115.JPG">
		</div>
	<div class='reviews'>
  <button class='cta' id="toggleBtn">
    <span class="arrow left" id="arrowLeft">←</span>
    <span id="labelText">Indiv. class</span>
    <span class="arrow right" id="arrowRight">→</span>
  </button>
</div>
 <div class="dots" id="dotsContainer"></div>
		<button class='cta after'>Book class</button>
</main>

    </div>
    <script>
  const featuredImg = document.getElementById('featuredImg');
  const arrowLeft = document.getElementById('arrowLeft');
  const arrowRight = document.getElementById('arrowRight');
const slides = [
  { src: 'images/IMG_0115.JPG', label: 'Indiv. class' },
  { src: 'images/groupclasses.png', label: 'Group class' },
  { src: 'images/onlinesession.png', label: 'Online session' },
  { src: 'images/bootcamp.png', label: 'Bootcamp' }
];

let current = 0;
const imageEl = document.getElementById('featuredImg');
const labelText = document.getElementById('labelText');

function updateSlide() {
  imageEl.classList.add('fade');
  labelText.classList.add('fade');

  // Wait for fade-out to complete before changing src
  setTimeout(() => {
    // only after fade-out
    imageEl.src = slides[current].src;
    labelText.textContent = slides[current].label;

    // Force layout reflow (may help ensure browser sees the change)
    void imageEl.offsetHeight;

    imageEl.classList.remove('fade');
    labelText.classList.remove('fade');

    updateDots();
  }, 300); // match transition time exactly
}


// Add event listeners for arrows
document.getElementById('arrowLeft').addEventListener('click', (e) => {
  e.stopPropagation(); // Prevent button default if needed
  current = (current - 1 + slides.length) % slides.length;
  updateSlide();
});

document.getElementById('arrowRight').addEventListener('click', (e) => {
  e.stopPropagation();
  current = (current + 1) % slides.length;
  updateSlide();
});

// Initial load
updateSlide();

let autoSlide = setInterval(() => {
  current = (current + 1) % slides.length;
  updateSlide();
}, 5000);

const featuredSection = document.querySelector('.featured');

featuredSection.addEventListener('mouseenter', () => {
  clearInterval(autoSlide);
});

featuredSection.addEventListener('mouseleave', () => {
  autoSlide = setInterval(() => {
    current = (current + 1) % slides.length;
    updateSlide();
  }, 5000);
});

let touchStartX = 0;

featuredSection.addEventListener('touchstart', (e) => {
  touchStartX = e.changedTouches[0].screenX; // store where the finger started
});

featuredSection.addEventListener('touchend', (e) => {
  const touchEndX = e.changedTouches[0].screenX;
  const swipeDistance = touchEndX - touchStartX;

  if (Math.abs(swipeDistance) > 50) { // if it's a big swipe
    if (swipeDistance > 0) {
      current = (current - 1 + slides.length) % slides.length; // swipe right = go back
    } else {
      current = (current + 1) % slides.length; // swipe left = next
    }
    updateSlide()
  }
});

const dotsContainer = document.getElementById('dotsContainer');

// Create one dot per slide
slides.forEach((_, index) => {
  const dot = document.createElement('span');
  if (index === 0) dot.classList.add('active');
  dotsContainer.appendChild(dot);
});

// Update which dot is active
function updateDots() {
  const allDots = dotsContainer.querySelectorAll('span');
  allDots.forEach((dot, index) => {
    dot.classList.toggle('active', index === current);
  });
}




</script>

</body>
</html>